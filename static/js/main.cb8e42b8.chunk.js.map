{"version":3,"sources":["components/Loader.jsx","context/CurrentUserContext.js","components/Card.jsx","components/Main.jsx","images/logo-mesto.svg","utils/token.js","components/Header.jsx","components/Footer.jsx","utils/utils.js","utils/api.js","utils/apiAuth.js","components/PopupWithForm.jsx","components/EditProfilePopup.jsx","components/CardDeletePopup.jsx","components/EditAvatarPopup.jsx","components/ProtectedRoute.jsx","components/AddPlacePopup.jsx","components/ImagePopup.jsx","components/InfoTooltip.jsx","components/AuthForm.jsx","components/Register.jsx","components/Login.jsx","components/App.jsx","index.js"],"names":["Loader","className","CurrentUserContext","React","createContext","Card","loader","setLoader","onCardClick","onCardLike","onTrashClick","card","useState","liked","setLiked","useEffect","currentUser","useContext","isOwn","owner","_id","trashButtonClass","isLiked","likes","some","likeOwner","likedClass","type","aria-label","onClick","src","link","alt","name","length","Main","props","userAvatar","avatar","userName","userDesc","about","onEditAvatar","style","backgroundImage","onEditProfile","onAddPlace","cards","map","onCardDelete","key","TOKEN_KEY","Header","location","useLocation","Logo","loggedIn","userData","email","localStorage","removeItem","setLoggedIn","to","pathname","Footer","apiToken","api","baseURL","headers","method","this","URL","fetch","then","result","ok","json","Promise","reject","status","body","JSON","stringify","avatarURL","authorization","apiAuth","res","data","error","token","PopupWithForm","isOpen","onClose","title","onSubmit","action","noValidate","children","buttonTitle","EditProfilePopup","setName","desc","setDesc","e","preventDefault","onUpdateUser","value","onChange","target","id","minLength","maxLength","placeholder","required","CardDeletePopup","EditAvatarPopup","avatarRef","useRef","handleUpdateUser","onUpdateAvatar","current","ref","ProtectedRoute","Component","component","AddPlacePopup","setTitle","url","setURL","ImagePopup","InfoTooltip","popupRef","history","useHistory","regStatus","classList","remove","push","setRegStatus","AuthForm","password","inputData","setInputData","handleChange","prevData","register","login","errorMessage","Register","Login","handleLogin","App","isEditAvatarPopupOpen","editAvatarPopupOpen","isEditProfilePopupOpen","editProfilePopupOpen","isCardDeletePopupOpen","cardDeletePopupOpen","isAddPlacePopupOpen","addPlacePopupOpen","setErrorMessage","setCurrentUser","selectedCard","selectCard","setUserData","setCards","getCards","items","catch","console","log","handleCardDelete","deleteCard","newCards","filter","currentCard","closeAllPopups","getProfile","tokenCheck","jwt","getItem","getData","userInfo","err","Provider","exact","path","cardToDelete","toggleLike","newCard","auth","statusCode","setItem","user","newUser","editProfileInfo","newAvatar","setAvatar","newPlace","addUserCard","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cb8e42b8.chunk.js","sourcesContent":["import React from 'react'\n\nfunction Loader() {\n  return (\n    <div className=\"lds-ripple\">\n      <div></div>\n      <div></div>\n    </div>\n  )\n}\n\nexport default Loader","import React from 'react'\n\nconst CurrentUserContext = React.createContext();\n\nexport { CurrentUserContext } ","import React from 'react'\nimport Loader from './Loader'\nimport { CurrentUserContext } from './../context/CurrentUserContext'\n\nfunction Card({ loader, setLoader, onCardClick, onCardLike, onTrashClick, card }) {\n  const [liked, setLiked] = React.useState(false)\n\n  React.useEffect(() => {\n    setLiked(false)\n    setLoader(true)\n  }, [loader, setLoader])\n\n  const handleClick = () => {\n    onCardClick(card);\n  }\n\n  const handleLikeClick = () => {\n    onCardLike(card)\n    setLiked(true)\n  }\n\n  const handleTrashClick = () => {\n    onTrashClick(card)\n  }\n\n  const currentUser = React.useContext(CurrentUserContext)\n  const isOwn = card.owner._id === currentUser._id;\n\n  const trashButtonClass = (\n    `${isOwn ? 'photo-grid__trash-button' :\n      'photo-grid__trash-button_hidden'}`\n  )\n\n  const isLiked = card.likes.some(likeOwner => likeOwner._id === currentUser._id)\n  const likedClass = (`${isLiked ? 'liked' : ''}`)\n\n  return (\n    <figure className=\"photo-grid__item\">\n      <button className={trashButtonClass} type=\"button\" aria-label=\"удалить\" onClick={handleTrashClick}></button>\n      <img src={card.link} alt={card.name} className=\"photo-grid__image\" onClick={handleClick} />\n      <div className=\"photo-grid__data\">\n        <p className=\"photo-grid__caption\">{card.name}</p>\n        {\n          liked ?\n            <Loader /> :\n            <button className={`photo-grid__like-button ${likedClass}`} type=\"button\" aria-label=\"лайк\" onClick={handleLikeClick}>\n              <p className=\"photo-grid__like-amount\">{card.likes.length}</p>\n            </button>\n        }\n      </div>\n    </figure>\n  )\n}\n\nexport default Card","import React from 'react'\nimport Card from './Card'\nimport { CurrentUserContext } from './../context/CurrentUserContext'\n\n\nfunction Main(props) {\n  const currentUser = React.useContext(CurrentUserContext)\n  const userAvatar = currentUser.avatar\n  const userName = currentUser.name\n  const userDesc = currentUser.about\n\n  return (\n    <main className=\"main\">\n      <section className=\"profile\">\n        <figure className=\"profile__figure\">\n          <div className=\"profile__image\" onClick={props.onEditAvatar} style={{ backgroundImage: `url(${userAvatar})` }}></div>\n          <div className=\"profile__info\">\n            <div className=\"profile__title\">\n              <h1 className=\"profile__header\">{userName}</h1>\n              <button className=\"profile__edit-button open-button\" type=\"button\" aria-label=\"редактировать\" onClick={props.onEditProfile}></button>\n            </div>\n            <p className=\"profile__subheader\">{userDesc}</p>\n          </div>\n          <button className=\"profile__add-button open-button\" type=\"button\" aria-label=\"добавить\" onClick={props.onAddPlace}></button>\n        </figure>\n      </section>\n      <section className=\"photo-grid\">\n        {props.cards.map((card) =>\n          <Card\n            card={card}\n            onCardClick={props.onCardClick}\n            onTrashClick={props.onTrashClick}\n            onCardLike={props.onCardLike}\n            onCardDelete={props.onCardDelete}\n            key={card._id}\n            loader={props.loader}\n            setLoader={props.setLoader}\n          />)}\n      </section>\n    </main>\n  )\n}\n\nexport default Main","export default __webpack_public_path__ + \"static/media/logo-mesto.a307e1c4.svg\";","const TOKEN_KEY = 'jwt';\n\nexport const setToken = (token) => {\n  localStorage.setItem(TOKEN_KEY, token);\n}\n\nexport const getToken = () => localStorage.getItem(TOKEN_KEY);\n\nexport const removeToken = () => {\n  localStorage.removeItem(TOKEN_KEY)\n}\n","import React from 'react'\nimport Logo from './../images/logo-mesto.svg'\nimport { useLocation, Link } from \"react-router-dom\"\nimport { removeToken } from './../utils/token'\n\nfunction Header(props) {\n  const location = useLocation();\n\n  function signOut(){\n    removeToken()\n    props.setLoggedIn(false)\n  }\n\n  return (\n    <header className=\"header\">\n      <img src={Logo} alt=\"текстовый логотип &laquo;Mesto Russia&raquo;\" className=\"header__logo\" />\n      <div className=\"header__auth\">\n        <span className=\"header__email\">{ props.loggedIn && props.userData ? props.userData.email : null }</span>\n          { props.loggedIn ?\n\n            <Link className=\"header__link\" onClick={ signOut } to='/signin'>\n            Выйти\n            </Link> :\n\n            <Link\n              className=\"header__link\"\n              to={ location.pathname === '/signin' ? '/signup' : '/signin' }\n            >{ location.pathname === '/signin' ? 'Регистрация' : 'Вход' }</Link>\n          }\n      </div>\n    </header>\n  )\n}\n\nexport default Header\n","import React from 'react'\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy;2020. Mesto Russia</p>\n    </footer>\n  )\n}\n\nexport default Footer","export const apiToken = '54532ad3-7188-4e99-8465-19f8ff7a677f'\nexport const userId = '227e883fa92ed0ace0785424'","import { apiToken } from './utils.js'\n\nclass Api {\n    constructor({ baseURL, headers, method = 'GET' }) {\n        this.baseURL = baseURL\n        this.headers = headers\n        this.method = method\n    }\n\n    getProfile(URL) {\n        return fetch(`${this.baseURL}${URL}`, {\n            headers: this.headers\n        })\n            .then(result => {\n                if (result.ok) {\n                    return result.json()\n                } else {\n                    return Promise.reject(`Что-то пошло не так: ${result.status}`);\n                }\n            })\n    }\n\n    getCards(URL) {\n        return fetch(`${this.baseURL}${URL}`, {\n            headers: this.headers\n        })\n            .then(result => {\n                if (result.ok) {\n                    return result.json()\n                } else {\n                    return Promise.reject(`Что-то пошло не так: ${result.status}`);\n                }\n            })\n    }\n\n    toggleLike(URL, method) {\n        return fetch(`${this.baseURL}${URL}`, {\n            method: method,\n            headers: this.headers\n        })\n            .then(result => {\n                if (result.ok) {\n                    return result.json()\n                } else {\n                    return Promise.reject(`Что-то пошло не так: ${result.status}`);\n                }\n            })\n    }\n\n    addUserCard(URL, method, name, link) {\n        return fetch(`${this.baseURL}${URL}`, {\n            method: method,\n            headers: this.headers,\n            body: JSON.stringify({\n                name: name,\n                link: link,\n            })\n        })\n            .then(result => {\n                if (result.ok) {\n                    return result.json()\n                } else {\n                    return Promise.reject(`Что-то пошло не так: ${result.status}`);\n                }\n            })\n    }\n\n    deleteCard(URL, method) {\n        return fetch(`${this.baseURL}${URL}`, {\n            method: method,\n            headers: this.headers\n        })\n            .then(result => {\n                if (result.ok) {\n                    return result.json()\n                } else {\n                    return Promise.reject(`Что-то пошло не так: ${result.status}`);\n                }\n            })\n    }\n\n    editProfileInfo(URL, method, name, about) {\n        return fetch(`${this.baseURL}${URL}`, {\n            method: method,\n            headers: this.headers,\n            body: JSON.stringify({\n                name,\n                about,\n            })\n        })\n            .then(result => {\n                if (result.ok) {\n                    return result.json()\n                } else {\n                    return Promise.reject(`Что-то пошло не так: ${result.status}`);\n                }\n            })\n    }\n\n    setAvatar(URL, method, avatarURL) {\n        return fetch(`${this.baseURL}${URL}`, {\n            method: method,\n            headers: this.headers,\n            body: JSON.stringify({\n                avatar: avatarURL\n            })\n        })\n            .then(result => {\n                if (result.ok) {\n                    return result.json()\n                } else {\n                    return Promise.reject(`Что-то пошло не так: ${result.status}`);\n                }\n            })\n    }\n}\n\nexport const api = new Api({\n  baseURL: 'https://mesto.nomoreparties.co/v1/cohort-14',\n  headers: {\n    authorization: apiToken,\n    'Content-Type': 'application/json'\n  }\n})\n","import { apiToken } from './utils.js'\n\nclass ApiAuth {\n    constructor({ baseURL, headers, method = 'GET' }) {\n        this.baseURL = baseURL\n        this.headers = headers\n        this.method = method\n    }\n\n    auth(URL, method, userData) {\n        return fetch(`${this.baseURL}${URL}`, {\n            method: method,\n            headers: this.headers,\n            body: JSON.stringify(userData)\n        })\n            .then(res => {\n                if (res.ok) {\n                    return res.json()\n                } else {\n                    return res.json().then(data => Promise.reject(data.error || `Что-то пошло не так: ${res.status}`))\n                }\n            })\n    }\n\n    getData(URL, token) {\n        return fetch(`${this.baseURL}${URL}`, {\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${token}`\n            },\n        })\n            .then(res => {\n                if (res.ok) {\n                    return res.json()\n                } else {\n                    return res.json().then(data => Promise.reject(data.error || `Что-то пошло не так: ${res.status}`))\n                }\n            })\n    }\n}\n\nexport const apiAuth = new ApiAuth({\n  baseURL: 'https://auth.nomoreparties.co',\n  headers: {\n    authorization: apiToken,\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n  }\n})\n","import React from 'react'\n\nfunction PopupWithForm(props) {\n  return (\n    <div className={`popup popup_${props.name} ${props.isOpen ? 'popup_opened' : ''}`}>\n      <div className=\"popup__container\">\n        <button className=\"popup__close-button\" type=\"button\" aria-label=\"закрыть\" onClick={props.onClose}></button>\n        <h2 className=\"popup__header\">{props.title}</h2>\n        <form onSubmit={props.onSubmit} className={`popup__form popup__${props.name}-form`} name={`popup-${props.name}-form`} method=\"post\" action=\"#\" noValidate>\n          {props.children}\n          {props.buttonTitle && <button type=\"submit\" className=\"popup__button\">{props.buttonTitle}</button> }\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default PopupWithForm\n","import React from 'react'\nimport PopupWithForm from './PopupWithForm'\nimport { CurrentUserContext } from './../context/CurrentUserContext'\n\nfunction EditProfilePopup(props) {\n  const currentUser = React.useContext(CurrentUserContext)\n  const [name, setName] = React.useState('')\n  const [desc, setDesc] = React.useState('')\n\n  React.useEffect(() => {\n    setName(currentUser.name || '');\n    setDesc(currentUser.about || '');\n  }, [currentUser]);\n\n  const handleNameChange = (e) => {\n    setName(e.target.value)\n  }\n\n  const handleDescChange = (e) => {\n    setDesc(e.target.value)\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    // Передаём значения управляемых компонентов во внешний обработчик\n    props.onUpdateUser({\n      about: desc,\n      name: name,\n    });\n  }\n\n  return (\n    <PopupWithForm title={'Редактировать профиль'} name={'edit'}\n      isOpen={props.isOpen} onClose={props.onClose}\n      buttonTitle={'Сохранить'} onSubmit={handleSubmit}>\n      <input type=\"text\" value={name} onChange={handleNameChange} className=\"popup__input popup__input_name\" id=\"name-input\" minLength=\"2\" maxLength=\"40\" placeholder=\"Имя\" required name=\"popup-input-name\" />\n      <div className=\"popup__input-error\" id=\"name-input-error\"></div>\n      <input type=\"text\" value={desc} onChange={handleDescChange} className=\"popup__input popup__input_job\" id=\"job-input\" minLength=\"2\" maxLength=\"200\" placeholder=\"Род деятельности\" required name=\"popup-input-job\" />\n      <div className=\"popup__input-error\" id=\"job-input-error\"></div>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup ","import React from 'react'\nimport PopupWithForm from './PopupWithForm'\n\nfunction CardDeletePopup(props) {\n  function handleDeleteConfirm(e) {\n\n    e.preventDefault();\n    props.onCardDelete(props.isOpen);\n  }\n\n  return (\n    <PopupWithForm isOpen={props.isOpen}\n      title={'Вы уверены?'}\n      name={'confirm'} buttonTitle={'Да'}\n      onClose={props.onClose}\n      onSubmit={handleDeleteConfirm} />\n  )\n}\n\nexport default CardDeletePopup ","import React from 'react'\nimport PopupWithForm from './PopupWithForm'\n\nfunction EditAvatarPopup(props) {\n  const avatarRef = React.useRef()\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateAvatar(avatarRef.current.value);\n  }\n\n  return (\n    <PopupWithForm title={'Обновить аватар'} name={'avatar'}\n      isOpen={props.isOpen} onClose={props.onClose}\n      buttonTitle={'Сохранить'} onUpdateUser={props.handleUpdateUser} onSubmit={handleSubmit}>\n      <input type=\"url\" ref={avatarRef} className=\"popup__input popup__input_link\" id=\"link-input\" placeholder=\"Ссылка на картинку\" required name=\"popup-input-link\" />\n      <div className=\"popup__input-error\" id=\"link-input-error\"></div>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup\n","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\n  return (\n    <Route>\n      {\n        () => props.loggedIn ?\n        <Component {...props} /> :\n        <Redirect to=\"/signin\" />\n      }\n    </Route>\n)}\n\nexport default ProtectedRoute;\n","import React from 'react'\nimport PopupWithForm from './PopupWithForm'\n\nfunction AddPlacePopup(props) {\n  const [title, setTitle] = React.useState('')\n  const [url, setURL] = React.useState('')\n\n  const handleTitleChange = (e) => {\n    setTitle(e.target.value)\n  }\n\n  const handleURLChange = (e) => {\n    setURL(e.target.value)\n  }\n\n  function handleAddPlaceSubmit(e) {\n    e.preventDefault();\n    props.onAddPlace({\n      title,\n      url\n    });\n  }\n\n  return (\n    <PopupWithForm title={'Новое место'} name={'add'}\n      isOpen={props.isOpen} onClose={props.onClose}\n      buttonTitle={'Создать'} onSubmit={handleAddPlaceSubmit}>\n      <input type=\"text\" onChange={handleTitleChange} className=\"popup__input popup__input_title\" id=\"title-input\" minLength=\"2\" maxLength=\"30\" placeholder=\"Название\" required name=\"popup-input-title\" />\n      <div className=\"popup__input-error\" id=\"title-input-error\"></div>\n      <input type=\"url\" onChange={handleURLChange} className=\"popup__input popup__input_link\" id=\"link-input\" placeholder=\"Ссылка на картинку\" required name=\"popup-input-link\" />\n      <div className=\"popup__input-error\" id=\"link-input-error\"></div>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup\n","import React from 'react'\nfunction ImagePopup(props) {\n  const src = props.card ? props.card.link : '#'\n  const alt = props.card ? props.card.name : ''\n  return (\n    <div className={`popup popup_zoom ${props.card ? 'popup_opened' : ''}`}>\n      <figure className=\"popup__figure\">\n        <button className=\"popup__close-button\" type=\"button\" aria-label=\"закрыть\" onClick={props.onClose} />\n        <img className=\"popup__image\" src={src} alt=\"#\" />\n        <figcaption className=\"popup__caption\">{alt}</figcaption>\n      </figure>\n    </div>\n  )\n}\n\nexport default ImagePopup ","\nimport React from 'react'\nimport { useHistory } from 'react-router-dom'\n\nfunction InfoTooltip(props) {\n\n  const popupRef = React.useRef()\n  const history = useHistory();\n\n  const closeHandler = () => {\n    popupRef.current.classList.remove('popup_opened')\n    if (props.regStatus === 'success')\n      {\n        history.push('/signin')\n      }\n\n    props.setRegStatus(false)\n  }\n\n  return (\n    <div ref={ popupRef } className={`popup ${props.regStatus ? 'popup_opened' : ''}`}>\n      <div className=\"popup__container\">\n        <button className=\"popup__close-button\" type=\"button\" aria-label=\"закрыть\" onClick={closeHandler}></button>\n        <div className={`popup__register ${props.regStatus}`}>\n        <h2 className=\"popup__header\">\n          {\n          props.regStatus === 'success' ?\n          'Вы успешно зарегистрировались!' :\n          'Что-то пошло не так! Попробуйте ещё раз.'\n          }\n        </h2>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default InfoTooltip\n","import React from 'react'\nimport { useLocation, Link } from 'react-router-dom'\nimport InfoTooltip from './InfoTooltip'\n\n\nfunction AuthForm(props) {\n\n  const location = useLocation();\n\n  const [ inputData, setInputData] = React.useState({\n    email: '',\n    password: ''\n  })\n\n  const handleChange = (e) => {\n    const { name, value } = e.target\n    setInputData((prevData) => ({\n      ...inputData,\n      [name]: value\n    }))\n  }\n\n  const handleRegisterSubmit = (e) => {\n    e.preventDefault()\n      props.register(location.pathname, 'POST', inputData)\n  }\n\nconst handleLoginSubmit = (e) => {\n    e.preventDefault();\n    props.login(location.pathname, 'POST', inputData)\n    setInputData({ email: '', password: ''});\n  }\n\n  return (\n    <>\n      <div className=\"inverted\">\n        <h2 className=\"popup__header\">{ location.pathname === '/signup' ? 'Регистрация' : 'Вход' }</h2>\n        <form\n          onSubmit={ location.pathname === '/signup' ? handleRegisterSubmit : handleLoginSubmit }\n          className=\"popup__form\"\n          method=\"post\"\n          action=\"#\"\n          noValidate\n        >\n          <input\n            type=\"email\"\n            placeholder=\"Email\"\n            onChange={ handleChange }\n            className=\"popup__input\"\n            minLength=\"2\"\n            maxLength=\"40\"\n            required\n            name=\"email\"\n          />\n\n          <div className=\"popup__input-error_active\" id=\"email-input-error\"></div>\n\n          <input\n            type=\"password\"\n            placeholder=\"Пароль\"\n            onChange={ handleChange }\n            className=\"popup__input\"\n            minLength=\"2\"\n            maxLength=\"200\"\n            required\n            name=\"password\"\n          />\n\n          <div className=\"popup__input-error_active\" id=\"password-input-error\"></div>\n\n          <button\n            type=\"submit\"\n            className=\"popup__button\"\n          >{ location.pathname === '/signup' ? 'Регистрация' : 'Вход' }</button>\n\n          { location.pathname === '/signup' &&\n            <div className=\"popup__register_hint\">Уже зарегистрированы? <Link className=\"popup__register_link\" to=\"/signin\">Войти</Link></div>\n          }\n          <div className=\"popup__input-error_active inverted\" id=\"common-input-error\">{ props.errorMessage }</div>\n        </form>\n      </div>\n      <InfoTooltip\n        onClose={props.onClose}\n        regStatus={props.regStatus}\n        setRegStatus={props.setRegStatus}\n      />\n    </>\n  )\n}\n\nexport default AuthForm\n","import React from 'react'\nimport AuthForm from './AuthForm'\n\nconst Register = (props) => {\n  return (\n      <div className=\"popup__container_auth\">\n        <AuthForm\n        onClose={props.onClose}\n        register={props.register}\n        regStatus={props.regStatus}\n        setRegStatus={props.setRegStatus}\n        errorMessage={props.errorMessage}\n        />\n      </div>\n  )\n}\n\nexport default Register\n","import React from 'react'\nimport AuthForm from './AuthForm'\n\n\nconst Login = (props) => {\n  return (\n      <div className=\"popup__container_auth\">\n        <AuthForm handleLogin={props.handleLogin} login={props.login} />\n      </div>\n  )\n}\n\nexport default Login\n","import './../index.css'\nimport Main from './Main'\nimport React from 'react'\nimport {\n  useHistory,\n  Switch,\n  Route,\n} from \"react-router-dom\"\nimport Header from './Header'\nimport Footer from './Footer'\nimport { api } from './../utils/api'\nimport { apiAuth } from './../utils/apiAuth'\nimport EditProfilePopup from './EditProfilePopup'\nimport { CurrentUserContext } from './../context/CurrentUserContext'\nimport CardDeletePopup from './CardDeletePopup'\nimport EditAvatarPopup from './EditAvatarPopup'\nimport ProtectedRoute from './ProtectedRoute'\nimport { setToken } from './../utils/token'\nimport AddPlacePopup from './AddPlacePopup'\nimport { getToken } from './../utils/token'\nimport ImagePopup from './ImagePopup'\nimport Register from './Register'\nimport Login from './Login'\n\n\nfunction App() {\n\n  const [isEditAvatarPopupOpen, editAvatarPopupOpen] = React.useState(false)\n  const [isEditProfilePopupOpen, editProfilePopupOpen] = React.useState(false)\n  const [isCardDeletePopupOpen, cardDeletePopupOpen] = React.useState(null)\n  const [isAddPlacePopupOpen, addPlacePopupOpen] = React.useState(false)\n  const [errorMessage, setErrorMessage] = React.useState('')\n  const [currentUser, setCurrentUser] = React.useState({})\n  const [selectedCard, selectCard] = React.useState(null)\n  const [regStatus, setRegStatus] = React.useState(false)\n  const [loggedIn, setLoggedIn] = React.useState(true)\n  const [userData, setUserData] = React.useState({})\n  const [loader, setLoader] = React.useState(true)\n  const [cards, setCards] = React.useState([])\n  const history = useHistory()\n\n  React.useEffect(() => {\n    api.getCards('/cards')\n      .then((items) => {\n        const card = items.map(card => ({\n          _id: card._id,\n          link: card.link,\n          name: card.name,\n          likes: card.likes,\n          owner: card.owner\n        }))\n        setCards(card)\n      })\n      .catch(error => console.log(error))\n  }, [])\n\n  const handleCardLike = (card) => {\n    const isLiked = card.likes.some(likeOwner => likeOwner._id === currentUser._id)\n    const method = !isLiked ? 'PUT' : 'DELETE'\n\n    api.toggleLike(`/cards/likes/${card._id}`, method)\n      .then((newCard) => {\n        const newCards = cards.map((currentCard) => currentCard._id === card._id ? newCard : currentCard)\n        setCards(newCards);\n      })\n      .then(() => setLoader(false))\n      .catch(error => console.log(error))\n  }\n\n  const handleCardDelete = (card) => {\n    api.deleteCard(`/cards/${card._id}`, 'DELETE')\n      .then(() => {\n        const newCards = cards.filter((currentCard) => currentCard._id !== card._id)\n        setCards(newCards)\n        closeAllPopups()\n      })\n      .catch(error => console.log(error))\n  }\n\n  React.useEffect(() => {\n    api.getProfile('/users/me')\n      .then(result => setCurrentUser(result))\n      .catch(error => console.log(error))\n  }, [])\n\n  const handleEditAvatarClick = () => {\n    editAvatarPopupOpen(true)\n  }\n\n  const handleEditProfileClick = () => {\n    editProfilePopupOpen(true)\n  }\n\n  const handleAddPlaceClick = () => {\n    addPlacePopupOpen(true)\n  }\n\n  const handleTrashClick = (cardToDelete) => {\n    cardDeletePopupOpen(cardToDelete)\n  }\n\n  const handleCardClick = (card) => {\n    selectCard(card)\n  }\n\n  const closeAllPopups = () => {\n    editAvatarPopupOpen(false)\n    editProfilePopupOpen(false)\n    addPlacePopupOpen(false)\n    cardDeletePopupOpen(false)\n    selectCard(null)\n  }\n\n  const handleUpdateUser = (newUser) => {\n    api.editProfileInfo('/users/me', 'PATCH', newUser.name, newUser.about)\n      .then(result => {\n        setCurrentUser(result)\n        closeAllPopups()\n      })\n      .catch(error => console.log(error))\n  }\n\n  const handleUpdateAvatar = (newAvatar) => {\n    api.setAvatar('/users/me/avatar', 'PATCH', newAvatar)\n      .then(result => {\n        setCurrentUser(result)\n        closeAllPopups()\n      })\n      .catch(error => console.log(error))\n  }\n\n  const handleAddPlace = (newPlace) => {\n    api.addUserCard('/cards', 'POST', newPlace.title, newPlace.url)\n      .then(newCard => {\n        setCards([newCard, ...cards])\n        closeAllPopups()\n      })\n      .catch(error => console.log(error))\n  }\n\n\n  const handleLogin = (userData) => {\n    setUserData(userData)\n    setLoggedIn(true)\n    history.push('/')\n  }\n\n  const tokenCheck = () => {\n    const jwt = getToken()\n\n    if (!jwt) {\n      setLoggedIn(false);\n    }\n\n    apiAuth.getData('/users/me', jwt)\n    .then((data) => {\n      if (data) {\n        const userInfo = {\n          id: data.data._id,\n          email: data.data.email\n        }\n        setUserData(userInfo)\n        setLoggedIn(true)\n      }\n    })\n    .catch(err => console.log(err));\n  }\n\n  const register = (URL, method, userData) => {\n  apiAuth.auth(URL, method, userData)\n      .then((res) => {\n        if (res.statusCode !== 400)\n        setErrorMessage('')\n        setRegStatus('success')\n      })\n    .catch((err) => {\n      setRegStatus('decline')\n      setErrorMessage(err)\n    })\n  }\n\n  const login = (URL, method, userData) => {\n    apiAuth.auth(URL, method, userData)\n    .then((data) => {\n      if (data) {\n        setErrorMessage('Что-то пошло не так!')\n      }\n\n      if (data.token) {\n        setToken(data.token)\n        setErrorMessage('')\n        handleLogin(data.user)\n      }\n    })\n    .catch((err) => {\n      setErrorMessage(err)\n    })\n  }\n\n  React.useEffect(() => {\n    tokenCheck();\n  }, [ loggedIn ]);\n\nreturn (\n      <CurrentUserContext.Provider value={currentUser}>\n\n        <Header\n          loggedIn={loggedIn}\n          userData={userData}\n          setLoggedIn={setLoggedIn}\n        />\n\n        <Switch>\n          <ProtectedRoute\n            exact path=\"/\"\n            loggedIn={loggedIn}\n            component={Main}\n            onEditAvatar={handleEditAvatarClick}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onCardClick={handleCardClick}\n            onTrashClick={handleTrashClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n            cards={cards}\n            setLoader={setLoader}\n            loader={loader}\n          />\n\n          <Route path=\"/signup\">\n            <Register\n            register={register}\n            regStatus={regStatus}\n            setRegStatus={setRegStatus}\n            errorMessage={errorMessage}\n            />\n          </Route>\n\n          <Route path=\"/signin\">\n            <Login\n              handleLogin={ handleLogin }\n              login={login}\n            />\n          </Route>\n\n            <Main>\n\n              <EditProfilePopup\n                isOpen={isEditProfilePopupOpen}\n                onClose={closeAllPopups}\n                onUpdateUser={handleUpdateUser}\n              />\n\n              <EditAvatarPopup\n                isOpen={isEditAvatarPopupOpen}\n                onClose={closeAllPopups}\n                onUpdateAvatar={handleUpdateAvatar}\n              />\n\n              <AddPlacePopup\n                isOpen={isAddPlacePopupOpen}\n                onClose={closeAllPopups}\n                onAddPlace={handleAddPlace}\n              />\n\n              <CardDeletePopup\n                isOpen={isCardDeletePopupOpen}\n                onClose={closeAllPopups}\n                onCardDelete={handleCardDelete}\n              />\n\n              <ImagePopup\n                card={selectedCard}\n                onClose={closeAllPopups}\n              />\n\n            </Main>\n\n            <Footer />\n          </Switch>\n      </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App.jsx';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}